<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-346180-20","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Validating Protobufs | ScalaPB</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" property="og:image" content="https://scalapb.github.io/img/scalapb-social-light.png"><meta data-react-helmet="true" property="twitter:image" content="https://scalapb.github.io/img/scalapb-social-light.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for ScalaPB"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Validating Protobufs | ScalaPB"><meta data-react-helmet="true" name="description" content="scalapb-validate is a code generator that generates validation methods for your messages based on rules and constraints defined in the proto. It uses the same validation rules provided by protoc-gen-validate."><meta data-react-helmet="true" property="og:description" content="scalapb-validate is a code generator that generates validation methods for your messages based on rules and constraints defined in the proto. It uses the same validation rules provided by protoc-gen-validate."><meta data-react-helmet="true" property="og:url" content="https://scalapb.github.io//docs/validation"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://scalapb.github.io//docs/validation"><link rel="stylesheet" href="/styles.e69897f8.css">
<link rel="preload" href="/styles.147d50b7.js" as="script">
<link rel="preload" href="/runtime~main.7d284cd4.js" as="script">
<link rel="preload" href="/main.a23c488f.js" as="script">
<link rel="preload" href="/1.b05a46e6.js" as="script">
<link rel="preload" href="/2.d79d948e.js" as="script">
<link rel="preload" href="/3.a17994a4.js" as="script">
<link rel="preload" href="/1be78505.22105b21.js" as="script">
<link rel="preload" href="/48.8b731ab4.js" as="script">
<link rel="preload" href="/935f2afb.a4a91e7e.js" as="script">
<link rel="preload" href="/17896441.885479ee.js" as="script">
<link rel="preload" href="/10204607.848b99dc.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ScalaPB.png" alt="ScalaPB"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/scalapb/ScalaPB" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ScalaPB.png" alt="ScalaPB"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/scalapb/ScalaPB" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started">Tutorial</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Customizing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/customizations">Customizations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sbt-settings">SBT Settings</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated-code">Generated Code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sealed-oneofs">Sealed oneofs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_defined_options">User-defined options</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/grpc">gRPC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/scala.js">Scala.js</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sparksql">SparkSQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/json">JSON</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/scalapbc">ScalaPBC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dotty">Dotty</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/third-party-protos">Using third-party protos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/common-protos">Common protos</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/validation">Validation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generic">Generic programming</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/writing-plugins">Writing protoc plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/upgrading">Upgrading</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Getting Help</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contact">Contacting us</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Validating Protobufs</h1></header><div class="markdown"><p><code>scalapb-validate</code> is a code generator that generates validation methods for your messages based on rules and constraints defined in the proto. It uses the same validation rules provided by <a href="https://github.com/envoyproxy/protoc-gen-validate" target="_blank" rel="noopener noreferrer">protoc-gen-validate</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="introduction"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>In many situations, you may want to add validation rules for your messages. For example, you might want to enforce that a certain string field is an email address, or that a repeated field has at least one element.</p><p>Such rules and constraints can be defined using custom options defined in <code>validate/validate.proto</code>. Here is an example taken from <a href="https://github.com/envoyproxy/protoc-gen-validate/blob/master/README.md" target="_blank" rel="noopener noreferrer">protoc-gen-validate&#x27;s documentation</a>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-protobuf codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">syntax = &quot;proto3&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">package examplepb;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;validate/validate.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">message Person {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  uint64 id    = 1 [(validate.rules).uint64.gt    = 999];</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  string email = 2 [(validate.rules).string.email = true];</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  string name  = 3 [(validate.rules).string = {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">                      pattern:   &quot;^[^[0-9]A-Za-z]+( [^[0-9]A-Za-z]+)*$&quot;,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">                      max_bytes: 256,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">                   }];</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  Location home = 4 [(validate.rules).message.required = true];</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  message Location {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    double lat = 1 [(validate.rules).double = { gte: -90,  lte: 90 }];</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    double lng = 2 [(validate.rules).double = { gte: -180, lte: 180 }];</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div></div></div></div></div><p>scalapb-validate supports all the rules available in protoc-gen-validate and is tested with the same test harness containing over 900 test cases.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installation"></a>Installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation" title="Direct link to heading">#</a></h2><p>Add the following to your <code>project/plugins.sbt</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">addSbtPlugin(&quot;com.thesamet&quot; % &quot;sbt-protoc&quot; % &quot;1.0.0-RC4&quot;)</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">libraryDependencies ++= Seq(</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    &quot;com.thesamet.scalapb&quot; %% &quot;compilerplugin&quot;           % &quot;0.10.9&quot;,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    &quot;com.thesamet.scalapb&quot; %% &quot;scalapb-validate-codegen&quot; % &quot;0.1.3&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">)</span></div></div></div></div></div><p>Change your <code>PB.targets</code> to generate the validation code. The output directory must be the same as the one used for <code>scalapb.gen</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">PB.targets in Compile := Seq(</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  scalapb.gen() -&gt; (sourceManaged in Compile).value / &quot;scalapb&quot;,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  scalapb.validate.gen() -&gt; (sourceManaged in Compile).value / &quot;scalapb&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">)</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">libraryDependencies ++= Seq(</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  &quot;com.thesamet.scalapb&quot; %% &quot;scalapb-validate-core&quot; % scalapb.validate.compiler.BuildInfo.version % &quot;protobuf&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">)</span></div></div></div></div></div><p>Note that we are adding <code>scalapb-validate-core</code> as a <code>protobuf</code> dependency. This makes it possible to import <code>validate/validate.proto</code> from your own protos.</p><p>If <a href="/docs/sbt-settings#additional-options-to-the-generator">ScalaPB generator parameters</a> are passed via <code>scalapb.gen(options: GeneratorOption*)</code>, the same parameters must be passed to <code>scalapb.validate.gen(options: GeneratorOption*)</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="using-the-generated-code"></a>Using the generated code<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-the-generated-code" title="Direct link to heading">#</a></h2><p>Generated code for both ScalaPB and scalapb-validate is generated at compilation time. In <code>sbt</code>, just type <code>compile</code>.</p><p>In addition to the standard ScalaPB generated files, scalapb-validate will generate a validator object for each message based on its protoc-gen-validate rules. For a message named <code>Msg</code> the validator object will be named <code>MsgValidator</code> and will extend <code>scalapb.validate.Validator[Msg]</code>. An implicit instance of the validator is added to the companion object of each message, which makes it possible to write <code>Validator[Msg]</code> to obtain an instance of the validator.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="validators"></a>Validators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#validators" title="Direct link to heading">#</a></h2><p>The validator object is an object with a <code>validate</code> method that takes an instance of a message and returns the validation result: The <code>Validator[T]</code> is defined as follows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">trait Validator[T] {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  def validate(t: T): Result</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div></div></div></div></div><p>where <code>Result</code> is a data structure that can be either a <code>Success</code> or a <code>Failure</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">sealed trait Result {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  def isSuccess: Boolean</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  def isFailure: Boolean</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">case object Success extends Result { ... }</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">case class Failure(violations: List[ValidationException]) extends Result { ... }</span></div></div></div></div></div><p>Therefore, the validation for the test person casn be run like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">Validator[Person].validate(personInstance) match {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  case Success             =&gt; println(&quot;Success!&quot;)</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  case Failure(violations) =&gt; println(violations)</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="package-scoped-extension-options"></a>Package-scoped extension options<a aria-hidden="true" tabindex="-1" class="hash-link" href="#package-scoped-extension-options" title="Direct link to heading">#</a></h2><p>ScalaPB-validate further extends ScalaPB&#x27;s package-scoped options to achieve additional customization:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-protobuf codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">syntax = &quot;proto2&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">package mypkg;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;scalapb/scalapb.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;scalapb/validate.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">option (scalapb.options) = {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  scope: PACKAGE</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  [scalapb.validate.file] {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      validate_at_construction: true</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      insert_validator_instance: true</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">};</span></div></div></div></div></div><ul><li><code>validate_at_construction</code> when true, a check for validity is added to the message class body, so construction of invalid messages results in a validation exception. Default: <code>false</code>.</li><li><code>insert_validator_instance</code> when true, implicit instance of a <code>Validator</code> is added to the companion object of the message. This enables writing <code>Validator[MyMsg].validate(instance)</code>. Default: <code>true</code>.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="rule-based-type-customization"></a>Rule-based type customization<a aria-hidden="true" tabindex="-1" class="hash-link" href="#rule-based-type-customization" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The functionality described in the remainder of this page is available in a preview release of ScalaPB. It is still being refined and is subject to change without notice.</p></div></div><p>Starting from version 0.10.10, ScalaPB provides a way to customize its own options by writing rules that are matched against
arbitrary protobuf options. When these rules are matched, additional ScalaPB options are added to the matched entity. For example, you can create a transformation that whenever a field has a PGV-rule like <code>int32: { gt: 0 }}</code>, then it will be typemapped to a custom class <code>PositiveInt</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installation-1"></a>Installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation-1" title="Direct link to heading">#</a></h3><p>The minimum required versions of sbt-protoc is <code>1.0.0-RC7</code>. You will also need a preview version of
ScalaPB and ScalaPB-validate. Your <code>project/plugins.sbt</code> should have something like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">addSbtPlugin(&quot;com.thesamet&quot; % &quot;sbt-protoc&quot; % &quot;1.0.0-RC7&quot;)</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">libraryDependencies ++= Seq(</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    &quot;com.thesamet.scalapb&quot; %% &quot;compilerplugin&quot;           % &quot;0.10.10-preview11&quot;,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    &quot;com.thesamet.scalapb&quot; %% &quot;scalapb-validate-codegen&quot; % &quot;0.2.0-preview11&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">)</span></div></div></div></div></div><p>While field transformation is a generic ScalaPB mechanism, it is also recommended that you add
scalapb-validate&#x27;s preprocessor to PB.targets. The preprocessor does two things:</p><ol><li>Provides field transformations for Set and cats data types.</li><li>Expand your PGV-based rules such that they match repeated items, map keys and map values.</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">PB.targets in Compile := Seq(</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  scalapb.validate.preprocessor() -&gt; (sourceManaged in Compile).value / &quot;scalapb&quot;,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  scalapb.gen() -&gt; (sourceManaged in Compile).value / &quot;scalapb&quot;,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  scalapb.validate.gen() -&gt; (sourceManaged in Compile).value / &quot;scalapb&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">)</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">libraryDependencies ++= Seq(</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  &quot;com.thesamet.scalapb&quot; %% &quot;scalapb-validate-core&quot; % scalapb.validate.compiler.BuildInfo.version % &quot;protobuf&quot;,</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  // If you are using Cats transformations:</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  &quot;com.thesamet.scalapb&quot; %% &quot;scalapb-validate-cats&quot; % scalapb.validate.compiler.BuildInfo.version,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  &quot;org.typelevel&quot; %% &quot;cats-core&quot; % &quot;2.3.0&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">)</span></div></div></div></div></div><p>There is an example project <a href="https://github.com/scalapb/scalapb-validate-demo" target="_blank" rel="noopener noreferrer">available on github</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="field-transformations"></a>Field transformations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#field-transformations" title="Direct link to heading">#</a></h3><p>if you want all positive integers to be typemapped to a Scala class called <code>PositiveInt</code> you can create a proto file with the following content:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-protobuf codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">syntax = &quot;proto2&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">package mypackage;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;scalapb/scalapb.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;scalapb/validate.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;validate/validate.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">option (scalapb.options) = {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  preprocessors: [&quot;scalapb-validate-preprocessor&quot;]</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  field_transformations: [</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      when: {[validate.rules] {int32: {gt: 0}}}</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      set: {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        type: &quot;mypkg.PositiveInt&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  ]</span></div><div class="token-line" style="color:#403f53"><span class="token plain">};</span></div></div></div></div></div><p>The scope of this definition is the entire protobuf file it is found in. Field tranformations can also
be used in package-scoped options so they are passed to all files within the package.</p><p>Here, <code>field_transformations</code> is a list of <code>FieldTransformation</code> messages. Each of them describes a single rule. The <code>when</code> condition is <code>google.protobuf.FieldOptions</code> message embedding a PGV <code>FieldRule</code> (defined in <code>validate/validate.proto</code>). When the rule is matched for any field in this file, the <code>scalapb.FieldOptions</code> options in <code>set</code> are applied to the field.  Multiple transformations may match a single field. The transformations from parent packages are applied first in descending order, that is from the outermost package to the package where the field resides. Within each package, the transformations are applied in the order they appear in the file. Options defined locally at the field-level are applied last.</p><p>There are three matching modes available:</p><ul><li><code>CONTAINS</code> is the default matching mode. In this mode, the preprocessor checks that all the options in the <code>when</code> pattern are defined on the field and having the same value. Additional options may be defined on the field besides the ones on the <code>when</code> pattern.</li><li><code>EXACT</code> is a strict equality comparison between the <code>when</code> pattern and the field&#x27;s rules.</li><li><code>PRESENCE</code> checks whether every field that is present on the <code>when</code> pattern is also present on the field&#x27;s rules. The specific value the option has is not compared. This allows matching on any value. For example, <code>{int32: {gt: 1}}</code> would match for any number assigned to <code>int32.gt</code>.</li></ul><p>Example syntax:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-protobuf codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">option (scalapb.options) = {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  preprocessors: [&quot;scalapb-validate-preprocessor&quot;]</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  field_transformations: [</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      when: {[validate.rules] {int32: {gt: 0}}}</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      match_type: EXACT</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      set: {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        type: &quot;mypkg.PositiveInt&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  ]</span></div><div class="token-line" style="color:#403f53"><span class="token plain">};</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="what-does-the-preprocessor-do"></a>What does the preprocessor do?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#what-does-the-preprocessor-do" title="Direct link to heading">#</a></h4><p>The preprocessor scans for <code>field_transformations</code> with <code>when</code> fields that contain <code>[validate.rules]</code> extensions. Whenever a <code>[validate.rules]</code> does contain a <code>repeated</code> or <code>map</code> validation rules it is assumed to be applied to a singleton type, so we add a copy of the rule for repeated, map-key and map-value context. For example, for this <code>PositiveInt</code> rule:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-protobuf codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">{</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  when: {[validate.rules] {int32: {gt: 0}}}</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  set: {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    type: &quot;mypkg.PositiveInt&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div></div></div></div></div><p>the following field transformations will be automatically added by the preprocessor:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">    {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      when: {[validate.rules] {repeated: {int32: {gt: 0}}}}</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      set: {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        type: &quot;mypkg.PositiveInt&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    },</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      when: {[validate.rules] {map: {keys: {int32: {gt: 0}}}}}</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      set: {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        key_type: &quot;mypkg.PositiveInt&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    },</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      when: {[validate.rules] {map: {values: {int32: {gt: 0}}}}}</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      set: {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        value_type: &quot;mypkg.PositiveInt&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    }</span></div></div></div></div></div><p>This saves you from writing those rules manually so the type transformation is applied in repeated fields or maps. Note that the rewrite mechanism rewrites the <code>type</code> in the original <code>set</code> field, into <code>key_type</code> or <code>value_type</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="cats-non-empty-collections"></a>Cats non-empty collections<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cats-non-empty-collections" title="Direct link to heading">#</a></h3><p>Using rules like the ones defined above, it is possible to detect when a list or a map are non-empty (via. <code>{repeated: { min_items: 1}}</code> or <code>{map: {min_pairs: 1}}</code>, and map them to corresponding non-empty collections.  Cats collections require some additional adaptation to ScalaPB since their API is different enough from standard Scala collections. ScalaPB-validate comes with support to automatically map non-empty collections to <code>NonEmptyMap</code>, <code>NonEmptySet</code> and <code>NonEmptyList</code>. To enable, add the following to a proto file. The scope of the settings will be for the entire file. You can turn the setting on for the
entire package by adding <code>scope: PACKAGE</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-protobuf codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">syntax = &quot;proto2&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">package mypackage;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;scalapb/scalapb.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;scalapb/validate.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">option (scalapb.options) = {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  preprocessors: [&quot;scalapb-validate-preprocessor&quot;]</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  [scalapb.validate.file] {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    validate_at_construction : true</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    cats_transforms : true</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    unique_to_set : true</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">};</span></div></div></div></div></div><p>As stated above, you will need to have <code>scalapb-validate-cats</code> listed in
<code>libraryDependencies</code>. The setting <code>unique_to_set</code> can be used independently
of cats to transform a repeated with <code>unique: true</code> rule to a set.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="unboxing-required-fields"></a>Unboxing required fields<a aria-hidden="true" tabindex="-1" class="hash-link" href="#unboxing-required-fields" title="Direct link to heading">#</a></h3><p>If you use <code>validate.message.required</code> you can apply a transformation that
would set the <code>scalapb.field.required</code> option. As a result, the field will
not be boxed in an <code>Option</code> and parsing will throw an exception if the field
is missing. To set this transformation add the following to ScalaPB-validate&#x27;s options:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-protobuf codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">option (scalapb.options) = {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    field_transformations: [</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">            when: {[validate.rules] {message: {required: true}}}</span></div><div class="token-line" style="color:#403f53"><span class="token plain">            set: {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">                required: true</span></div><div class="token-line" style="color:#403f53"><span class="token plain">            }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    ]</span></div><div class="token-line" style="color:#403f53"><span class="token plain">};</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="referencing-rules-values"></a>Referencing rules values<a aria-hidden="true" tabindex="-1" class="hash-link" href="#referencing-rules-values" title="Direct link to heading">#</a></h3><p>It is possible to reference values in the rules and use them
on the <code>set</code> part. Whenever there is a singular string field  in Scala options, the preprocessor would replace tokens in the format <code>$(p)</code> with the value of the field&#x27;s option at the path <code>p</code>. To reference extension fields, wrap the extension full name in brackets (<code>[]</code>). For example, <code>$([valiate.rules].int32.gt)</code> would be substituted with the value of that option on the field. If the option is not set on the field, a default value will be replaced (0 for numeric types, empty string, and so on).</p><p>The paths that are referenced don&#x27;t have to appear on the <code>when</code> pattern. While referencing rule values is useful when the matching mode is <code>PRESENCE</code>, it is supported to reference rule values in all matching modes.</p><p>A possible application for this is in conjunction with <a href="https://github.com/fthomas/refined" target="_blank" rel="noopener noreferrer">refined types</a>. For example, you can define the following field transformations:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-protobuf codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">syntax = &quot;proto3&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">package refined_test;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;validate/validate.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;scalapb/validate.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;scalapb/scalapb.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">option (scalapb.options) = {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  preprocessors : [ &quot;scalapb-validate-preprocessor&quot; ]</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  import : &quot;eu.timepit.refined.api.Refined&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  import : &quot;eu.timepit.refined.numeric._&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  import : &quot;eu.timepit.refined.generic._&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  import : &quot;shapeless.{Witness =&gt; W}&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  field_transformations : [ {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    when : {[validate.rules] {int32 : {gt : 1}}}  // &lt;-- 1 can be replaced with any number</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    set : {type : &quot;Int Refined Greater[$([validate.rules].int32.gt)]&quot;}</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    match_type : PRESENCE</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  } ]</span></div><div class="token-line" style="color:#403f53"><span class="token plain">};</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">message Test {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  int32 gt_test = 1 [ (validate.rules).int32 = {gt : 5} ];  // transformed to: Int Refined Greater[5]</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div></div></div></div></div><p>For this to work, a typemapper for refined types need to be either put in a package object in the same package where the code is generated, or be manually imported through <code>import</code> options.</p><p>The typemapper used in scalapb-validate tests is <a href="https://github.com/scalapb/scalapb-validate/blob/0.2.x-preview/e2e/src/main/scala/scalapb/transforms/refined/package.scala" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Additional resources:</p><ul><li><a href="https://github.com/scalapb/scalapb-validate/blob/0.2.x-preview/e2e/src/main/protobuf/transforms/refined/refined.proto" target="_blank" rel="noopener noreferrer">test proto files (refined.proto)</a>: note it uses <code>shapeless.Witness</code> since ScalaPB-validate is cross-tested for Scala 2.12 and Scala 2.13.</li><li><a href="https://github.com/scalapb/scalapb-validate/blob/0.2.x-preview/e2e/src/test/scala/scalapb/validate/transforms/refined/RefinedSpec.scala" target="_blank" rel="noopener noreferrer">end-to-end tests</a> demonstrating compile-time validation.</li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/common-protos"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Common protos</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/generic"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Writing generic code Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#installation" class="table-of-contents__link">Installation</a></li><li><a href="#using-the-generated-code" class="table-of-contents__link">Using the generated code</a></li><li><a href="#validators" class="table-of-contents__link">Validators</a></li><li><a href="#package-scoped-extension-options" class="table-of-contents__link">Package-scoped extension options</a></li><li><a href="#rule-based-type-customization" class="table-of-contents__link">Rule-based type customization</a><ul><li><a href="#installation-1" class="table-of-contents__link">Installation</a></li><li><a href="#field-transformations" class="table-of-contents__link">Field transformations</a></li><li><a href="#cats-non-empty-collections" class="table-of-contents__link">Cats non-empty collections</a></li><li><a href="#unboxing-required-fields" class="table-of-contents__link">Unboxing required fields</a></li><li><a href="#referencing-rules-values" class="table-of-contents__link">Referencing rules values</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installation">Installation</a></li><li class="footer__item"><a href="https://scalapb.github.io/api/scalapb" target="_blank" rel="noopener noreferrer" class="footer__link-item">ScalaDoc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/scalapb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://gitter.im/ScalaPB/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a href="https://groups.google.com/g/scalapb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Google Groups</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/scalapb/ScalaPB" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2014-2021, <a href="https://www.linkedin.com/in/nadav-samet/">Nadav Samet</a></div></div></div></footer></div>
<script src="/styles.147d50b7.js"></script>
<script src="/runtime~main.7d284cd4.js"></script>
<script src="/main.a23c488f.js"></script>
<script src="/1.b05a46e6.js"></script>
<script src="/2.d79d948e.js"></script>
<script src="/3.a17994a4.js"></script>
<script src="/1be78505.22105b21.js"></script>
<script src="/48.8b731ab4.js"></script>
<script src="/935f2afb.a4a91e7e.js"></script>
<script src="/17896441.885479ee.js"></script>
<script src="/10204607.848b99dc.js"></script>
</body>
</html>