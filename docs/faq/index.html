<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-346180-20","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Frequently Asked Questions | ScalaPB</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" property="og:image" content="https://scalapb.github.io/img/scalapb-social-light.png"><meta data-react-helmet="true" property="twitter:image" content="https://scalapb.github.io/img/scalapb-social-light.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for ScalaPB"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Frequently Asked Questions | ScalaPB"><meta data-react-helmet="true" name="description" content="IntelliJ complains on duplicate files (&quot;class is already defined&quot;)"><meta data-react-helmet="true" property="og:description" content="IntelliJ complains on duplicate files (&quot;class is already defined&quot;)"><meta data-react-helmet="true" property="og:url" content="https://scalapb.github.io//docs/faq"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://scalapb.github.io//docs/faq"><link rel="stylesheet" href="/styles.e69897f8.css">
<link rel="preload" href="/styles.147d50b7.js" as="script">
<link rel="preload" href="/runtime~main.f5eef46c.js" as="script">
<link rel="preload" href="/main.42a78eda.js" as="script">
<link rel="preload" href="/1.b05a46e6.js" as="script">
<link rel="preload" href="/2.d79d948e.js" as="script">
<link rel="preload" href="/3.a17994a4.js" as="script">
<link rel="preload" href="/1be78505.22105b21.js" as="script">
<link rel="preload" href="/48.8b731ab4.js" as="script">
<link rel="preload" href="/935f2afb.a4a91e7e.js" as="script">
<link rel="preload" href="/17896441.885479ee.js" as="script">
<link rel="preload" href="/0f622c7a.5eff9ead.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ScalaPB.png" alt="ScalaPB"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/scalapb/ScalaPB" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ScalaPB.png" alt="ScalaPB"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/scalapb/ScalaPB" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started">Tutorial</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Customizing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/customizations">Customizations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sbt-settings">SBT Settings</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated-code">Generated Code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sealed-oneofs">Sealed oneofs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_defined_options">User-defined options</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/grpc">gRPC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/scala.js">Scala.js</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sparksql">SparkSQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/json">JSON</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/scalapbc">ScalaPBC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dotty">Dotty</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/third-party-protos">Using third-party protos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/common-protos">Common protos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/validation">Validation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generic">Generic programming</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/writing-plugins">Writing protoc plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/upgrading">Upgrading</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Getting Help</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contact">Contacting us</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Frequently Asked Questions</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="intellij-complains-on-duplicate-files-class-is-already-defined"></a>IntelliJ complains on duplicate files (&quot;class is already defined&quot;)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#intellij-complains-on-duplicate-files-class-is-already-defined" title="Direct link to heading">#</a></h2><p>If you are using sbt-protoc this should not happen. Please file a bug.</p><p>If you are still using sbt-scalapb, please switch to sbt-protoc as described
in the installation instruction.</p><p>sbt-protobuf which sbt-scalapb relies on defaults to generating the case
classes in <code>target/src_managed/compiled_protobuf/</code>.  This leads to a situation
where both <code>target/src_managed/compiled_protobuf/</code> and its parent, <code>target/src_managed/</code>,
are considered source directories and the source files are seen twice. To
eliminate this problem, let&#x27;s tell sbt-protobuf to generate the sources into
the parent directory. Add this to your <code>build.sbt</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">scalaSource in PB.protobufConfig := sourceManaged.value</span></div></div></div></div></div><p>If you generate Java sources, add,</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">javaSource in PB.protobufConfig := sourceManaged.value</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-do-i-use-scalapb-from-the-command-line"></a>How do I use ScalaPB from the command line?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-do-i-use-scalapb-from-the-command-line" title="Direct link to heading">#</a></h2><p>Check out <a href="/docs/scalapbc">ScalaPBC</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-do-i-use-scalapb-with-maven"></a>How do I use ScalaPB with Maven?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-do-i-use-scalapb-with-maven" title="Direct link to heading">#</a></h2><p>ScalaPB code generator can be invoked in your Maven build through the protobuf-maven-plugin. See <a href="https://github.com/thesamet/scalapb-maven-example" target="_blank" rel="noopener noreferrer">example project</a>.</p><p>The relevant parts are marked with &quot;Add protobuf-maven-plugin...&quot;</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-do-i-get-grpc-java-conversions-flat-packages-etc-with-maven"></a>How do I get grpc, java conversions, flat packages, etc with Maven?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-do-i-get-grpc-java-conversions-flat-packages-etc-with-maven" title="Direct link to heading">#</a></h2><p>The example maven project invokes ScalaPBC. To get these ScalaPB features, you need to pass a
generator parameter to ScalaPBC. See the supported generator parameters and how to use them in
<a href="/docs/scalapbc">ScalaPBC</a> documentation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="i-am-getting-import-was-not-found-or-had-errors"></a>I am getting &quot;Import was not found or had errors&quot;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#i-am-getting-import-was-not-found-or-had-errors" title="Direct link to heading">#</a></h2><p>If you are using sbt-protoc and importing protos like <code>scalapb/scalapb.proto</code>,
or common protocol buffers like <code>google/protobuf/wrappers.proto</code>:</p><p>Add the following to your <code>build.sbt</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">libraryDependencies += &quot;com.thesamet.scalapb&quot; %% &quot;scalapb-runtime&quot; % scalapb.compiler.Version.scalapbVersion % &quot;protobuf&quot;</span></div></div></div></div></div><p>This tells <code>sbt-protoc</code> to extract protos from this jar (and all its
dependencies, which includes Google&#x27;s common protos), and make them available
in the include path that is passed to protoc.</p><p>If you are not using sbt (for example, spbc), then you need to make those
files available on the file system.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-do-i-generate-scala-code-for-protos-from-another-jar"></a>How do I generate Scala code for protos from another jar?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-do-i-generate-scala-code-for-protos-from-another-jar" title="Direct link to heading">#</a></h2><p>For some proto packages, we may already provide pre-compiled generated code in
<a href="https://github.com/scalapb/common-protos" target="_blank" rel="noopener noreferrer">ScalaPB&#x27;s Common Protos project</a>.
If what you are looking for is not there, consider adding it by following the
instructions on the project&#x27;s page.</p><p>To build it yourself using SBT: include the jar as a <code>protobuf</code> dependency in your libraryDependencies:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">libraryDependencies += &quot;com.somepackage&quot; %% &quot;that-has-jar&quot; % &quot;1.0&quot; % &quot;protobuf-src&quot; transitive()</span></div></div></div></div></div><p>This will tell sbt-protoc to extract the protos from that jar into
<code>target/scala-2.vv/protobuf_external_src</code> and add them both to the import
search path and the set of sources to generate code for (<code>PB.protoSources</code>).</p><p>The <code>intransitive</code> modifier makes it not unpack the dependencies of this
library to the same directory since you may not want to generate classes for them
as well. Many common libraries depend on <code>protobuf-java</code>, and generated
classes for them are already shipped with ScalaPB&#x27;s <code>scalapb-runtime</code>. When
using <code>intransitive()</code>, you should ensure all the dependencies are provided,
either as <code>protobuf-src</code> or <code>protobuf</code> (depending if you want to compile them
or just import them).</p><p>You may find other protos under <code>protobuf_external_src</code> that you do not wish to
compile. You can exclude them by adding an <code>includeFilter</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">includeFilter in PB.generate := new SimpleFileFilter(</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  (f: File) =&gt;  f.getParent.endsWith(&quot;com/thesamet/protos&quot;))</span></div></div></div></div></div><p>See <a href="https://github.com/thesamet/sbt-protoc/tree/master/examples/multi-with-external-jar" target="_blank" rel="noopener noreferrer">full example here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="why-message-fields-are-wrapped-in-an-option-in-proto3"></a>Why message fields are wrapped in an <code>Option</code> in proto3?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#why-message-fields-are-wrapped-in-an-option-in-proto3" title="Direct link to heading">#</a></h2><p>For a proto like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-protobuf codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">synax = &quot;proto3&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">message A {}</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">message B {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    A a = 1;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div></div></div></div></div><p>The generated case class for <code>B</code> will have a field <code>a: Option[A]</code>. The reason
is that in the proto3 format, it is valid for an encoded message of type <code>B</code> to not
contain a value for the field <code>a</code>. Using the <code>Option[A]</code> type lets us distinguish
between the case where a value for <code>A</code> was not provided and the case where <code>A</code>
was explictly set to a certain value (even if that value is the default value
for <code>A</code>). The case where <code>a</code> is not set, and the case that <code>A</code> is set to its
default value have two distinct binary representations (in both proto2 and
proto3).</p><p>You can set a certain message type or a field to not be wrapped in an <code>Option</code>
using the <a href="/docs/customizations#message-level-custom-type-and-boxing"><code>no_box</code> option</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-do-i-represent-optiont-in-proto3-for-scalar-fields"></a>How do I represent <code>Option[T]</code> in proto3 for scalar fields?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-do-i-represent-optiont-in-proto3-for-scalar-fields" title="Direct link to heading">#</a></h2><p>Scalar fields are the various numeric types, <code>bool</code>, <code>string</code>, <code>byte</code> and <code>enum</code> -
everything except of messages. In the proto2 wire format, there is a distinction between
not setting a value (<code>None</code>), or setting it to its default value (<code>Some(0)</code> or
<code>Some(&quot;&quot;)</code>).</p><p>In proto3, this distinction has been removed in the wire format. Whenever the value
of a scalar type is zero, it does not get serialized. Therefore, the parser is not
able to distinguish between <code>Some(0)</code> or <code>None</code>. The semantics is that a <a href="https://developers.google.com/protocol-buffers/docs/proto3#default" target="_blank" rel="noopener noreferrer">zero
has been received</a>.</p><p>Optional message types are still wrapped in <code>Option[]</code> since there is a
distinction in the wire format between leaving out a message (which is
represent by <code>None</code> or sending one, even if all its fields are unset (or
assigned default values). If you wish to have <code>Option[]</code> around scalar
types in proto3, you can use this fact to your advantage by using <a href="/docs/customizations#primitive-wrappers">primitive wrappers</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="why-a-certain-customization-is-not-available-as-a-global-generator-parameter"></a>Why a certain customization is not available as a global generator parameter?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#why-a-certain-customization-is-not-available-as-a-global-generator-parameter" title="Direct link to heading">#</a></h2><p>It turns out that global generator parameters that affect source code compatibility are something that we would like to avoid, as it is creating issues that are tricky to resolve. For example, if:</p><ul><li>package A provides proto files and generate source code with one value of a generator parameter,</li><li>package B is compiled separately with a different value of this generator parameter, and imports protos from package A, as well as its generated classes.</li></ul><p>then the code generator for B has no way of knowing that package A has code generated with a different parameter, and that it needs to account for that in the way it references it. This leads to compilation errors in ScalaPB or in user-provided code generators.</p><p>In version 0.8.2, we introduced <a href="/docs/customizations#package-scoped-options">package-scoped options</a> which let you set file-level options for an entire package at once.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-do-i-write-my-own-scala-code-generator-for-protocol-buffers"></a>How do I write my own Scala code generator for protocol buffers?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-do-i-write-my-own-scala-code-generator-for-protocol-buffers" title="Direct link to heading">#</a></h2><p>Easy! Check out <a href="https://github.com/scalapb/scalapb-plugin-template.g8" target="_blank" rel="noopener noreferrer">giter8 template for writing new code generators</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-do-i-mark-a-generated-case-class-private"></a>How do I mark a generated case class private?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-do-i-mark-a-generated-case-class-private" title="Direct link to heading">#</a></h2><p>Easy! See this example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-protobuf codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">syntax = &quot;proto3&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">import &quot;scalapb/scalapb.proto&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">message MyPrivateMessage {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    option (scalapb.message).annotations = &quot;private[com.mypkg]&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    option (scalapb.message).companion_annotations = &quot;private[com.mypkg]&quot;;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-do-i-use-scalapb-with-gradle"></a>How do I use ScalaPB with Gradle?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-do-i-use-scalapb-with-gradle" title="Direct link to heading">#</a></h2><p>You can use ScalaPB with the official <a href="https://github.com/google/protobuf-gradle-plugin" target="_blank" rel="noopener noreferrer">Protobuf Plugin for Gradle</a>.</p><p>In your <code>build.gradle</code> the <code>protobuf</code> section should look like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-gradle codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">ext {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  scalapbVersion = &#x27;0.10.9&#x27;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">dependencies {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  compile &quot;com.thesamet.scalapb:scalapb-runtime_2.12:${scalapbVersion}&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">protobuf {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  protoc {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    artifact = &#x27;com.google.protobuf:protoc:3.11.4&#x27;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  plugins {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    scalapb {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      artifact = (org.gradle.nativeplatform.platform.internal.DefaultNativePlatform.getCurrentOperatingSystem().isWindows()) ?</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          &quot;com.thesamet.scalapb:protoc-gen-scala:${scalapbVersion}:windows@bat&quot; :</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          &quot;com.thesamet.scalapb:protoc-gen-scala:${scalapbVersion}:unix@sh&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  }</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  generateProtoTasks {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    all().each { task -&gt;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      task.builtins {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          // if you don&#x27;t want java code to be generated.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          remove java</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      task.plugins {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          scalapb {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">            // add any ScalaPB generator options here. See: https://scalapb.github.io/scalapbc.html#passing-generator-parameters</span></div><div class="token-line" style="color:#403f53"><span class="token plain">            // option &#x27;flat_package&#x27;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">// Add geneated Scala code as a source directory</span></div><div class="token-line" style="color:#403f53"><span class="token plain">sourceSets {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  main {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    scala {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        srcDirs &quot;${protobuf.generatedFilesBaseDir}/main/scalapb&quot;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">}</span></div></div></div></div></div><p>See <a href="https://github.com/scalapb/gradle-demo" target="_blank" rel="noopener noreferrer">full example here</a>.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/upgrading"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Upgrade guide</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/contact"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Contacting us Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#intellij-complains-on-duplicate-files-class-is-already-defined" class="table-of-contents__link">IntelliJ complains on duplicate files (&quot;class is already defined&quot;)</a></li><li><a href="#how-do-i-use-scalapb-from-the-command-line" class="table-of-contents__link">How do I use ScalaPB from the command line?</a></li><li><a href="#how-do-i-use-scalapb-with-maven" class="table-of-contents__link">How do I use ScalaPB with Maven?</a></li><li><a href="#how-do-i-get-grpc-java-conversions-flat-packages-etc-with-maven" class="table-of-contents__link">How do I get grpc, java conversions, flat packages, etc with Maven?</a></li><li><a href="#i-am-getting-import-was-not-found-or-had-errors" class="table-of-contents__link">I am getting &quot;Import was not found or had errors&quot;</a></li><li><a href="#how-do-i-generate-scala-code-for-protos-from-another-jar" class="table-of-contents__link">How do I generate Scala code for protos from another jar?</a></li><li><a href="#why-message-fields-are-wrapped-in-an-option-in-proto3" class="table-of-contents__link">Why message fields are wrapped in an <code>Option</code> in proto3?</a></li><li><a href="#how-do-i-represent-optiont-in-proto3-for-scalar-fields" class="table-of-contents__link">How do I represent <code>Option[T]</code> in proto3 for scalar fields?</a></li><li><a href="#why-a-certain-customization-is-not-available-as-a-global-generator-parameter" class="table-of-contents__link">Why a certain customization is not available as a global generator parameter?</a></li><li><a href="#how-do-i-write-my-own-scala-code-generator-for-protocol-buffers" class="table-of-contents__link">How do I write my own Scala code generator for protocol buffers?</a></li><li><a href="#how-do-i-mark-a-generated-case-class-private" class="table-of-contents__link">How do I mark a generated case class private?</a></li><li><a href="#how-do-i-use-scalapb-with-gradle" class="table-of-contents__link">How do I use ScalaPB with Gradle?</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installation">Installation</a></li><li class="footer__item"><a href="https://scalapb.github.io/api/scalapb" target="_blank" rel="noopener noreferrer" class="footer__link-item">ScalaDoc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/scalapb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://gitter.im/ScalaPB/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a href="https://groups.google.com/g/scalapb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Google Groups</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/scalapb/ScalaPB" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2014-2020, <a href="https://www.linkedin.com/in/nadav-samet/">Nadav Samet</a></div></div></div></footer></div>
<script src="/styles.147d50b7.js"></script>
<script src="/runtime~main.f5eef46c.js"></script>
<script src="/main.42a78eda.js"></script>
<script src="/1.b05a46e6.js"></script>
<script src="/2.d79d948e.js"></script>
<script src="/3.a17994a4.js"></script>
<script src="/1be78505.22105b21.js"></script>
<script src="/48.8b731ab4.js"></script>
<script src="/935f2afb.a4a91e7e.js"></script>
<script src="/17896441.885479ee.js"></script>
<script src="/0f622c7a.5eff9ead.js"></script>
</body>
</html>