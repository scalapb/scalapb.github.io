<html><head><title>ScalaPB: SBT Settings</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Nadav Samet" /><meta name="description" content="Protocol buffer compiler for Scala" /><meta name="og:image" content="/img/poster.png" /><meta name="image" property="og:image" content="/img/poster.png" /><meta name="og:title" content="ScalaPB: SBT Settings" /><meta name="title" property="og:title" content="ScalaPB: SBT Settings" /><meta name="og:site_name" content="ScalaPB" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="Protocol buffer compiler for Scala" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="ScalaPB: SBT Settings" /><meta name="twitter:image" content="/img/poster.png" /><meta name="twitter:description" content="Protocol buffer compiler for Scala" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/img/favicon310x150.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/css/light-style.css" /><link rel="stylesheet" href="/css/custom.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><div id="sidebar-brand"><a href="/" class="brand"><div class="brand-wrapper"></div><span>ScalaPB</span></a><button id="main-toggle" class="sidebar-toggle"><span class="close"></span></button></div><div class="sidebar-nav"> <div class="sidebar-nav-item  "><a href="" title="About" class="">About</a></div> <div class="sidebar-nav-item  "><a href="sbt-settings.html" title="SBT Settings" class="">SBT Settings</a></div> <div class="sidebar-nav-item  "><a href="generated-code.html" title="Generated Code" class="">Generated Code</a></div> <div class="sidebar-nav-item  "><a href="customizations.html" title="Customizations" class="">Customizations</a></div> <div class="sidebar-nav-item  "><a href="sealed-oneofs.html" title="Sealed oneofs" class="">Sealed oneofs</a></div> <div class="sidebar-nav-item  "><a href="user_defined_options.html" title="User-defined Options" class="">User-defined Options</a></div> <div class="sidebar-nav-item  "><a href="grpc.html" title="gRPC" class="">gRPC</a></div> <div class="sidebar-nav-item  "><a href="scala.js.html" title="Scala.js" class="">Scala.js</a></div> <div class="sidebar-nav-item  "><a href="sparksql.html" title="SparkSQL" class="">SparkSQL</a></div> <div class="sidebar-nav-item  "><a href="json.html" title="JSON" class="">JSON</a></div> <div class="sidebar-nav-item  "><a href="scalapbc.html" title="ScalaPBC" class="">ScalaPBC</a></div> <div class="sidebar-nav-item  "><a href="api/scalapb/latest/" title="API Docs" class="">API Docs</a></div> <div class="sidebar-nav-item  "><a href="faq.html" title="FAQ" class="">FAQ</a></div> <div class="sidebar-nav-item  "><a href="migrating.html" title="Migrating" class="">Migrating</a></div> <div class="sidebar-nav-item  "><a href="contact.html" title="Contact Us" class="">Contact Us</a></div></div></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/scalapb/ScalaPB" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/scalapb/ScalaPB" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="scalapb" data-github-repo="ScalaPB"><div class="content-wrapper"><section><h1 id="sbt-settings">SBT Settings</h1>

<h2 id="basic-installation">Basic Installation</h2>

<p>To automatically generate Scala case classes for your messages add ScalaPBâ€™s
sbt plugin to your project. Create a file named <code class="highlighter-rouge">project/scalapb.sbt</code>
containing the following line:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">addSbtPlugin</span><span class="o">(</span><span class="s">"com.thesamet"</span> <span class="o">%</span> <span class="s">"sbt-protoc"</span> <span class="o">%</span> <span class="s">"0.99.27"</span><span class="o">)</span>

<span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"com.thesamet.scalapb"</span> <span class="o">%%</span> <span class="s">"compilerplugin"</span> <span class="o">%</span> <span class="s">"0.9.4"</span>
</code></pre>
</div>

<p>Add the following line to your <code class="highlighter-rouge">build.sbt</code>:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="nc">PB</span><span class="o">.</span><span class="n">targets</span> <span class="n">in</span> <span class="nc">Compile</span> <span class="o">:=</span> <span class="nc">Seq</span><span class="o">(</span>
  <span class="n">scalapb</span><span class="o">.</span><span class="n">gen</span><span class="o">()</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">sourceManaged</span> <span class="n">in</span> <span class="nc">Compile</span><span class="o">).</span><span class="n">value</span>
<span class="o">)</span>
</code></pre>
</div>

<p>Running the <code class="highlighter-rouge">compile</code> command in sbt will both generate Scala sources from
your protos and compile them. If you just want to generate Scala sources for
your protocol buffers without compiling them, run <code class="highlighter-rouge">protoc-generate</code></p>

<p>Additionally, if you need <a href="/customizations.html">customizations</a> from
scalapb/scalapb.proto or anything from <code class="highlighter-rouge">google/protobuf/*.proto</code>, add the
following to your <code class="highlighter-rouge">build.sbt</code>:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"com.thesamet.scalapb"</span> <span class="o">%%</span> <span class="s">"scalapb-runtime"</span> <span class="o">%</span> <span class="n">scalapb</span><span class="o">.</span><span class="n">compiler</span><span class="o">.</span><span class="nc">Version</span><span class="o">.</span><span class="n">scalapbVersion</span> <span class="o">%</span> <span class="s">"protobuf"</span>
</code></pre>
</div>

<h2 id="defaults">Defaults</h2>

<p>The plugin assumes your <code class="highlighter-rouge">proto</code> files are under <code class="highlighter-rouge">src/main/protobuf</code>,
however this is configurable using the <code class="highlighter-rouge">PB.protoSources in Compile</code> setting.</p>

<p>By default, <code class="highlighter-rouge">sbt-protoc</code> invokes <code class="highlighter-rouge">protoc</code> 3.x that is shipped with <code class="highlighter-rouge">protoc-jar</code>.
If you would like to run a different version of <code class="highlighter-rouge">protoc</code>:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="nc">PB</span><span class="o">.</span><span class="n">protocVersion</span> <span class="o">:=</span> <span class="s">"-v3.10.0"</span>
</code></pre>
</div>

<p>See all available options in <a href="https://github.com/thesamet/sbt-protoc">sbt-protoc documentation</a></p>

<h2 id="running-on-windows">Running on Windows</h2>

<p>Before sbt-protoc 0.99.15, generating Scala code on Windows required Python 2.x
to be installed on your system. If you are using sbt-protoc 0.99.15 or later,
then things should just work.</p>

<p>If you are using an older version of sbt-protoc and unable to upgrade, then
you must have Python 2.x installed on your system.  If Python is not installed
on your system, you can <a href="https://www.python.org/downloads/windows/">download it from here</a>.</p>

<p>If Python.exe can be found in your PATH, then ScalaPB should just work.  If
not, you can set the location of the Python executable explicitly:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="nc">PB</span><span class="o">.</span><span class="n">pythonExe</span> <span class="o">:=</span> <span class="s">"C:\\Python27\\Python.exe"</span>
</code></pre>
</div>

<h2 id="java-conversions">Java Conversions</h2>

<p>To enable Java conversions add the following to your build.sbt:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="nc">PB</span><span class="o">.</span><span class="n">targets</span> <span class="n">in</span> <span class="nc">Compile</span> <span class="o">:=</span> <span class="nc">Seq</span><span class="o">(</span>
  <span class="nc">PB</span><span class="o">.</span><span class="n">gens</span><span class="o">.</span><span class="n">java</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">sourceManaged</span> <span class="n">in</span> <span class="nc">Compile</span><span class="o">).</span><span class="n">value</span><span class="o">,</span>
  <span class="n">scalapb</span><span class="o">.</span><span class="n">gen</span><span class="o">(</span><span class="n">javaConversions</span><span class="k">=</span><span class="kc">true</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">sourceManaged</span> <span class="n">in</span> <span class="nc">Compile</span><span class="o">).</span><span class="n">value</span>
<span class="o">)</span>
</code></pre>
</div>

<h2 id="grpc">gRPC</h2>

<p>Generating gRPC stubs for services is enabled by default. To disable:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="nc">PB</span><span class="o">.</span><span class="n">targets</span> <span class="n">in</span> <span class="nc">Compile</span> <span class="o">:=</span> <span class="nc">Seq</span><span class="o">(</span>
  <span class="n">scalapb</span><span class="o">.</span><span class="n">gen</span><span class="o">(</span><span class="n">grpc</span><span class="k">=</span><span class="kc">false</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">sourceManaged</span> <span class="n">in</span> <span class="nc">Compile</span><span class="o">).</span><span class="n">value</span>
<span class="o">)</span>
</code></pre>
</div>

<h2 id="additional-options-to-the-generator">Additional options to the generator</h2>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">scalapb</span><span class="o">.</span><span class="n">gen</span><span class="o">(</span>
  <span class="n">flatPackage</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span>
  <span class="n">javaConversions</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span>
  <span class="n">grpc</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span>
  <span class="n">singleLineToProtoString</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span>
  <span class="n">asciiFormatToString</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span>
  <span class="n">lenses</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span>
  <span class="n">retainSourceCodeInfo</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>
<span class="o">)</span>
</code></pre>
</div>

<p>Note that in ScalaPB 0.7, <code class="highlighter-rouge">singleLineToString</code> has been renamed to 
<code class="highlighter-rouge">singleLineToProtoString</code>.</p>

<p><strong><code class="highlighter-rouge">flatPackage</code></strong>: When true, ScalaPB will not append the protofile base name
to the package name.</p>

<p><strong><code class="highlighter-rouge">singleLineToProtoString</code></strong>: By default, ScalaPB generates a <code class="highlighter-rouge">toProtoString()</code> method
that renders the message as a multi-line format (using <code class="highlighter-rouge">TextFormat.printToUnicodeString</code>).
Set to true If you would like ScalaPB to generate <code class="highlighter-rouge">toString()</code> methods that use the single line
format.</p>

<p><strong><code class="highlighter-rouge">asciiFormatToString</code></strong>: Setting this to true, overrides <code class="highlighter-rouge">toString</code> to
return a standard ASCII representation of the message by calling
<code class="highlighter-rouge">toProtoString</code>.</p>

<p><strong><code class="highlighter-rouge">lenses</code></strong>: By default, ScalaPB generates lenses for each message for easy
updating. If you are not using this feature and would like to reduce code size
or compilation time, you can set this to <code class="highlighter-rouge">false</code> and lenses will not be
generated.</p>

<p><strong><code class="highlighter-rouge">retainSourceCodeInfo</code></strong>: Retain source code information (locations,
comments) provided by protoc in the descriptors. Use the <code class="highlighter-rouge">location</code> accessor
to get that information from a descriptor.</p>
</section></div></div></div></div><script src="/highlight/highlight.pack.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/protobuf.min.js"></script><script>hljs.configure({languages:['scala','java','bash','protobuf']});
hljs.initHighlightingOnLoad();
              </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script>((window.gitter = {}).chat = {}).options = {
room: 'ScalaPB/community'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/js/docs.js"></script></body></html>